<Page loaded="loaded" xmlns:drawer="nativescript-telerik-ui/sidedrawer">
	<Page.actionBar>
		<ActionBar title="Groceries">
			<ActionBar.actionItems>
				<ActionItem text="Sign out" tap="signOut" ios.position="left" />
				<ActionItem android.text="Share" tap="share" icon="res://share" ios.position="right" />
			</ActionBar.actionItems>
		</ActionBar>
	</Page.actionBar>

	<drawer:SideDrawer id="drawer" drawerLocation="Right">
		<drawer:SideDrawer.mainContent>
			<GridLayout rows="auto, *">
				<GridLayout cssClass="topSection" row="0" columns="*, auto">
					<TextField id="grocery" text="{{ grocery }}" hint="Enter a grocery item" returnKeyType="done" col="0" />
					<Image src="res://history" tap="history" col="1" />
				</GridLayout>
 
				<ListView items="{{ groceryList }}" id="groceryList" row="1">
					<ListView.itemTemplate>
						<GridLayout columns="auto, *, auto">
							<Image src="{{ done ? 'res://checked' : 'res://unchecked' }}" cssClass="checkbox" tap="toggleDone" col="0" />
							<Label text="{{ name }}" col="1" />
							<Image src="res://ic_menu_delete" ios:visibility="collapsed" tap="delete" col="2" />
						</GridLayout>
					</ListView.itemTemplate>
				</ListView>

				<ActivityIndicator busy="{{ isLoading }}" rowSpan="2" />
			</GridLayout>
		</drawer:SideDrawer.mainContent>
		<drawer:SideDrawer.drawerContent>
			<GridLayout rows="auto, *, auto" id="drawerContent">
				<Label text="Add recent items" cssClass="heading" row="0" />
				<ListView id="history" items="{{ history }}" row="1">
					<ListView.itemTemplate>
						<StackLayout orientation="horizontal">
							<Image src="{{ done ? 'res://selected' : 'res://add-to-groceries' }}" tap="toggleHistory" cssClass="addButton" />
							<Label text="{{ name }}" />
						</StackLayout>
					</ListView.itemTemplate>
				</ListView>
				<Button text="Add to the groceries list" tap="addFromHistory" cssClass="addAllButton" row="2" />
				<ActivityIndicator busy="{{ isHistoryLoading }}"
					rowSpan="3" />
			</GridLayout>
		</drawer:SideDrawer.drawerContent>
	</drawer:SideDrawer>
</Page>